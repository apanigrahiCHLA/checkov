name: Find URLs in Codebase



on:

 Â push:

 Â Â Â branches: [ main, master, develop ]

 Â pull_request:

 Â Â Â branches: [ main, master, develop ]

 Â workflow_dispatch:



jobs:

 Â find-urls:

 Â Â Â runs-on: ubuntu-latest

 Â Â  

 Â Â Â steps:

 Â Â Â - name: Checkout code

 Â Â Â Â Â uses: actions/checkout@v4



 Â Â Â - name: Find all URLs

 Â Â Â Â Â run: |

 Â Â Â Â Â Â Â echo "# ðŸ” URLs Found in Codebase" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â echo "" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â  

 Â Â Â Â Â Â Â # Create CSV report

 Â Â Â Â Â Â Â echo "File,Line,URL,Type" > urls_report.csv

 Â Â Â Â Â Â  

 Â Â Â Â Â Â Â # Find HTTP/HTTPS URLs

 Â Â Â Â Â Â Â echo "## HTTP/HTTPS URLs:" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â echo "" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â  

 Â Â Â Â Â Â Â grep -r -n -E "https?://[^\s\"'<>)\]};,]+" . \

 Â Â Â Â Â Â Â Â Â --exclude-dir=.git \

 Â Â Â Â Â Â Â Â Â --exclude-dir=node_modules \

 Â Â Â Â Â Â Â Â Â --exclude-dir=.github \

 Â Â Â Â Â Â Â Â Â --exclude-dir=target \

 Â Â Â Â Â Â Â Â Â --exclude-dir=build \

 Â Â Â Â Â Â Â Â Â --exclude-dir=dist \

 Â Â Â Â Â Â Â Â Â --exclude="*.min.js" \

 Â Â Â Â Â Â Â Â Â --exclude="*.map" | while IFS=: read -r file line content; do

 Â Â Â Â Â Â Â Â Â url=$(echo "$content" | grep -oE "https?://[^\s\"'<>)\]};,]+")

 Â Â Â Â Â Â Â Â Â echo "$file,$line,$url,HTTP/HTTPS" >> urls_report.csv

 Â Â Â Â Â Â Â Â Â echo "- \`$file:$line\` â†’ $url" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â done

 Â Â Â Â Â Â  

 Â Â Â Â Â Â Â echo "" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â echo "## WWW URLs:" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â echo "" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â  

 Â Â Â Â Â Â Â # Find www URLs

 Â Â Â Â Â Â Â grep -r -n -E "www\.[^\s\"'<>)\]};,]+" . \

 Â Â Â Â Â Â Â Â Â --exclude-dir=.git \

 Â Â Â Â Â Â Â Â Â --exclude-dir=node_modules \

 Â Â Â Â Â Â Â Â Â --exclude-dir=.github \

 Â Â Â Â Â Â Â Â Â --exclude-dir=target \

 Â Â Â Â Â Â Â Â Â --exclude-dir=build \

 Â Â Â Â Â Â Â Â Â --exclude-dir=dist \

 Â Â Â Â Â Â Â Â Â --exclude="*.min.js" \

 Â Â Â Â Â Â Â Â Â --exclude="*.map" | while IFS=: read -r file line content; do

 Â Â Â Â Â Â Â Â Â url=$(echo "$content" | grep -oE "www\.[^\s\"'<>)\]};,]+")

 Â Â Â Â Â Â Â Â Â echo "$file,$line,$url,WWW" >> urls_report.csv

 Â Â Â Â Â Â Â Â Â echo "- \`$file:$line\` â†’ $url" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â done

 Â Â Â Â Â Â  

 Â Â Â Â Â Â Â # Count totals

 Â Â Â Â Â Â Â TOTAL_URLS=$(wc -l < urls_report.csv)

 Â Â Â Â Â Â Â TOTAL_URLS=$((TOTAL_URLS - 1)) # Subtract header row

 Â Â Â Â Â Â  

 Â Â Â Â Â Â Â echo "" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â echo "## Summary" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â echo "**Total URLs found: $TOTAL_URLS**" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â echo "" >> $GITHUB_STEP_SUMMARY

 Â Â Â Â Â Â Â echo "ðŸ“¥ Download the complete CSV report from the Actions artifacts below." >> $GITHUB_STEP_SUMMARY



 Â Â Â - name: Upload URL Report

 Â Â Â Â Â uses: actions/upload-artifact@v4

 Â Â Â Â Â with:

 Â Â Â Â Â Â Â name: urls-report

 Â Â Â Â Â Â Â path: urls_report.csv

 Â Â Â Â Â Â Â retention-days: 30
